---
title: "Child poverty update"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)

knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())

```

```{r}

library(tidyverse)
library(scales)
library(ggiraph)
library(htmltools)

source("R/00_functions.R")
source("R/00_colours.R")

cp_charts <- readRDS("data/cp_charts.rds")

create_html <- function(md) {
  htmltools::HTML(
    markdown::markdownToHTML(
      text = md, fragment.only = TRUE
    )
  )
}

make4panels <- function(title_tl, subtitle_tl, text_tl, chart_tl, desc_tl,
                        title_tr, subtitle_tr, text_tr, chart_tr, desc_tr,
                        title_bl, subtitle_bl, text_bl, chart_bl, desc_bl,
                        title_br, subtitle_br, text_br, chart_br, desc_br) {
  
  div(class = "row fluid-row",
     
      div(class = "col-md-6", 
          
          div(class = "panel panel-default",
              div(class = "panel-heading",
                  h1(class = "panel-title", title_tl),
                  p(subtitle_tl)),
              div(class = "panel-body",
                  p(text_tl),
                  chart_tl)),
              
          div(class = "panel panel-default",
              div(class = "panel-heading",
                  h1(class = "panel-title", title_bl),
                  p(subtitle_bl)),
              div(class = "panel-body",
                  p(text_bl),
                  chart_bl))),
     
      div(class = "col-md-6", 
          
          div(class = "panel panel-default",
              div(class = "panel-heading",
                  h1(class = "panel-title", title_tr),
                  p(subtitle_tr)),
              div(class = "panel-body",
                  p(text_tr),
                  chart_tr)),
          
          div(class = "panel panel-default",
              div(class = "panel-heading",
                  h1(class = "panel-title", title_br),
                  p(subtitle_br)),
              div(class = "panel-body",
                  p(text_br),
                  chart_br))) )
}
 
# Theme ----

mytheme <- theme_grey() +
  theme(text = element_text(colour = SGgreys[1], size = 20),

        line = element_line(colour = SGgreys[1],
                            linetype = 1,
                            lineend = 2,
                            size = 0.5),

        plot.title = element_text(hjust = 0, colour = SGgreys[1]),
        plot.subtitle = element_text(hjust = 0, colour = SGgreys[1]),
        plot.caption = element_text(hjust = 1,
                                    margin = margin(t = 20)),

        legend.position = "top",
        legend.title = element_blank(),

        panel.background = element_blank(),
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),

        axis.line.x = element_line(),
        axis.ticks.length = unit(2, "pt"),
        axis.ticks.y = element_blank(),

        axis.title = element_blank(),
        axis.text.y = element_blank())

theme_set(mytheme)

```

<!-- Include skip target at the top of the document -->

<script>
  $(document).ready(function(){
    $head = $('#header');
    $head.prepend('<div class=\"skiptarget\"><a id=\"maincontent\">-</a></div>')
    });
</script>

**Published on 26 March 2020, next update March 2021**

The Child Poverty Act 2017 contains four income-based targets to reduce child poverty in Scotland by 2030. The charts show the interim and final targets and the latest poverty estimates and trends. Note that the dots and labels show single-year estimates and the lines show the three-year averages. Single-year estimates can be used to understand the situation at a certain point in time, and three-year averages show trends more accurately.

The charts show that over the longer term, child poverty is not falling or falling too slowly to be on track to achieve the targets.

```{r panels}

make4panels(title_tl = "Relative poverty",
            subtitle_tl = "Low income relative to the rest of society", 
            text_tl = "Proportion of children living in households with equivalised incomes below 60% of the median (middle) UK income in the current year.", 
            chart_tl = girafe(ggobj = cp_charts[['rel']]), 
            desc_tl = "Line chart of the relative child poverty rate over time and the targets, showing a small increase in recent years that may now have stopped at a level remaining considerably above the targets.",
            
            title_tr = "Absolute poverty", 
            subtitle_tr = "Low living standards relative to 2010/11", 
            text_tr = "Proportion of children living in households with equivalised incomes below 60% of the median UK income in a base year (currently 2010/11) adjusted for inflation.", 
            chart_tr = girafe(ggobj = cp_charts[['abs']]), 
            desc_tr = "Line chart of the absolute child poverty rate over time and the targets, showing an initial fall followed by stagnation in recent years at a level considerably higher than the targets.",
            
            title_bl = "Combined low income and material deprivation", 
            subtitle_bl = "Unable to afford basic necessities", 
            text_bl = "Proportion of children in households with equivalised incomes below 70% of the median UK income and going without certain basic goods and services.", 
            chart_bl = girafe(ggobj = cp_charts[['md']]), 
            desc_bl = "Line chart of the proportion of children in combined low income and material deprivation over time and the targets, showing little change and a level that is considerably higher than the targets.",
            
            title_br = "Persistent poverty", 
            subtitle_br = "In poverty for several years", 
            text_br = "Proportion of children who have lived in relative poverty in three or more of the last four years.", 
            chart_br = girafe(ggobj = cp_charts[['pers']]), 
            desc_br = "Line chart of the absolute child poverty rate over time and the targets, showing an initial fall followed by stagnation in recent years at a level considerably higher than the targets.")


```


[More information and further child poverty analysis](https://www.gov.scot/collections/child-poverty-statistics/) is available.
